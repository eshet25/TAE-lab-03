---
title: "Lab 03 - Nobel laureates"
author: "Tsion"
date: "02/03/2026"
output: github_document
---

### Load packages and data

```{r load-packages, message=FALSE}
library(tidyverse) 
```

```{r load-data, message=FALSE}
nobel <- read_csv("data/nobel.csv")
```

## Exercises

Here is a link to the [lab instructions](https://datascience4psych.github.io/DataScience4Psych/lab03.html).

### Exercise 1

```{r get-to-know-data}
glimpse(nobel)
```

1. The data has 1026 observations (rows) and 26 columns (variables). Each row represents a single Noble Laureate (specifying 26 different variables like firstname, lastname, year Noble won, date/city/country born,...)

### Exercise 2

```{r create-filtered-new-data-frame}
nobel_living <- nobel %>%     #create nobel_living from nobel then pipe
  filter(                     
    is.na(died_date),        #died_date is NA
    !is.na(country),         #country is available (not NA)
    gender != "org"          #gender not equal to organization 
  ) 
```

```{r confirm-new-variable}
nrow(nobel_living)
```

I have confirmed there are `r nrow(nobel_living)` observations. 

### Exercise 3

```{r create-new-variable-to-identify-if-laureate-was-in-US-when-won}
nobel_living <- nobel_living %>%           
  mutate(                                             
    country_us = if_else(country == "USA", "USA", "Other")  
  )                                   

#pipeline to mutate the nobel_living data 
#create new variable    
#If country == "USA": label it as "USA"
#Otherwise: label "Other"
```

```{r check-new-variable}
table(nobel_living$country_us)           #make a frequency count table to check new variable
```

```{r limit-analysis-to-only-chosen-categories}
nobel_living_science <- nobel_living %>%                
  filter(category %in% c("Physics", "Medicine", "Chemistry", "Economics")) 

#%>% is pipe   
#%in% checks if a certain value is found in the group specified (y/n) 
#c creates a vector (list of values)
```

```{r pize-vs-US-laureate-faceted-bar}
ggplot(data = nobel_living_science, aes(x=country_us, fill = country_us)) +
  geom_bar() +
  facet_wrap(~category) +
  coord_flip() +                      #could also just put y=country_us?
  labs(
    x = "Country based during nobel prize win",
    y = "Number of Nobel Laureates",
    title = "Counts of Nobel Laureates by Country and Category",
    fill = "Country"
  )
```

Based on our bar graphes, it certainly looks like the data supports the Buzzfeed article's headline. Well, at least the first part of its claim. In each category, we can see that the number of living nobel laureates based in the US when they won their prizes is greater than those that are outside of the US. 

### Exercise 4

```{r create-new-variable-for-those-born-in-US}
nobel_living <- nobel_living %>%
  mutate(
    born_country_us = if_else(born_country == "USA", "USA", "Other")
  )
```

```{r check-new-variable-born}
table(nobel_living$born_country_us) 
```

There are 113 US born nobel laureates. 

### Exercise 5

```{r once-again-limit-analysis-to-science-categories-with-new-variable}
nobel_living_science <- nobel_living %>%                
  filter(category %in% c("Physics", "Medicine", "Chemistry", "Economics")) 
```

```{r create-bar-graph-with-country-of-birth}
ggplot(data = nobel_living_science, aes(x=country_us, fill = born_country_us)) +
  geom_bar() +
  facet_wrap(~category) +
  coord_flip() +                     
  labs(
    x = "Country based during nobel prize win",
    y = "Number of Nobel Laureates",
    title = "Counts of Nobel Laureates by Country of Birth and Category",
    fill = "Country of Birth"
  )
```

Ok, now it has become a little ambiguous. Earlier, we saw that the majority of people who won science-related nobel prizes were based in the United States. But now we are seeing from our data that out of the the winners based in the US, a significant portion of them were actually born in the US. There also seems to be a very small portion in the Physics category that is potentially unknown/missing information. So, from this visualization, I can't say that our data supports Buzzfeed's claim.

### Exercise 6

```{r most-common-country}
nobel_living_science %>%      #create the pipe first (then filter>count>arrange)
  filter(
    country_us == "USA",         #won their prize in the US/living in the US
    born_country_us == "Other") %>%   #but were born outside of the US, pipe again
      count(born_country) %>%        #create frequency table for birth country
        arrange(desc(n))             #n = number of observations
```

As per the data above, it appears United Kingdom is the most common country. 
...
